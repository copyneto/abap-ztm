sap.ui.define([],function(){"use strict";return{onInit:function(e){},onExit:function(e){},onBeforeRendering:function(e){let t=this.getView().byId("addEntry");let s=this.getOwnerComponent().getModel("i18n").getResourceBundle();t.setText(s.getText("createB+
utton"))},onAfterRendering:function(e){},onActionCreateMdfUsingFo2:function(e){var t="/sap/opu/odata/sap/ZUI_O2_TM_MDF";var s=new sap.ui.model.odata.ODataModel(t,false);s.read("/ZI_TM_VH_MDF_OF_NF_CRIAR",{success:function(e){this.generateFileSearchHelp(e+
.results)}.bind(this),error:function(e){alert("Falha ao recuperar as Ordens de Frete")}.bind(this)})},onActionCreateMdfUsingFo:function(e){var t=this;var s="usarOfCriarMdfeListaSet(OrdemFrete='')";var a="/sap/opu/odata/SAP/ZTM_MONITOR_MDF_SRV/";var n=new+
 sap.ui.model.odata.ODataModel(a,false);var r=function(){return new Promise(function(e,t){n.read(s,{success:function(t,s){e();var a=t.OrdemFreteLista.split(";");let n=[];for(let e=0;e<a.length;e++){n.push({FreightOrder:a[e]})}this.generateFileSearchHelp(+
n)}.bind(this),error:function(e){t();this.showLog(e.response.body)}.bind(this)})}.bind(this))}.bind(this);var o={dataloss:false};this.extensionAPI.securedExecution(r,o)},generateFileSearchHelp:function(e){var t=this;var s=new sap.m.ComboBox({id:"oComboBo+
x",items:{path:"/items",template:new sap.ui.core.ListItem({key:"{FreightOrder}",text:"{FreightOrder}"}),templateShareable:false},showSecondaryValues:true});s.setModel(new sap.ui.model.json.JSONModel({items:e}));var a=new sap.ui.layout.VerticalLayout({wid+
th:"100%",content:[new sap.m.Text({text:"Favor informar a Ordem de Frete utilizada para gerar um novo MDFe."}),new sap.m.Text({text:" "}),s]});var n=new sap.m.Button({type:sap.m.ButtonType.Emphasized,text:"Criar MDFe usando OF",press:function(){var e=sap+
.ui.getCore().byId("oComboBox").getSelectedKey();if(!e){alert("Informar Ordem de Frete antes de prosseguir")}else{o.close();t.generateFile(e)}}});var r=new sap.m.Button({text:"Cancelar",type:"Reject",press:function(){o.close();o.destroy();this.getView().+
removeAllDependents()}.bind(this)});var o=new sap.m.Dialog({type:"Message",title:"Criar MDFe usando OF",resizable:true,draggable:true,titleAlignment:sap.m.TitleAlignment.Center,content:a,beginButton:n,endButton:r,afterClose:function(){o.destroy()},conten+
tWidth:"20%"});o.open()},generateFile:function(e){var t="usarOfCriarMdfeSet(OrdemFrete='"+e+"')";var s="/sap/opu/odata/SAP/ZTM_MONITOR_MDF_SRV/";var a=new sap.ui.model.odata.ODataModel(s,false);var n=function(){return new Promise(function(e,s){a.read(t,{+
success:function(t,s){e();sap.m.MessageToast.show(t.Message);this.templateBaseExtension.getExtensionAPI().refreshTable()}.bind(this),error:function(e){s();this.showLog(e.response.body);this.templateBaseExtension.getExtensionAPI().refreshTable()}.bind(thi+
s)})}.bind(this))}.bind(this);var r={dataloss:false};this.extensionAPI.securedExecution(n,r)},showSuccessMessage:function(e){this.getView().setBusy(false)},showErrorMessage:function(e){this.getView().setBusy(false)},showLog:function(e){let t=[];for(const+
 s of e.matchAll(/(?:<message>(.*?)<[/]message>)/gm)){t.push(s[1])}let s=[];for(const t of e.matchAll(/(?:<severity>(.*?)<[/]severity>)/gm)){switch(t[1]){case"error":s.push(sap.ui.core.MessageType.Error);break;case"info":s.push(sap.ui.core.MessageType.In+
formation);break;case"success":s.push(sap.ui.core.MessageType.Success);break;case"warning":s.push(sap.ui.core.MessageType.Warning);break;default:s.push(sap.ui.core.MessageType.None);break}}for(let e=0;e<t.length;e++){if(t[e]=="Ocorreu uma exceção"){conti+
nue}sap.ui.getCore().getMessageManager().addMessages(new sap.ui.core.message.Message({message:t[e],persistent:true,type:s[e]}))}},onActionPrint:function(e){let t=this.templateBaseExtension.getExtensionAPI().getSelectedContexts();var s="/sap/opu/odata/SAP+
/ZTM_MONITOR_MDF_SRV/";var a=t.reduce(function(e,t){if(t.getObject().StatusCode=="100"){return e+t.getObject().Guid.toString().replaceAll("-","").toUpperCase()+";"}else{return e}},"");if(!a){alert("Nenhuma MDF-e autorizada foi selecionada");return}var n=+
s+"downloadSet(Id='"+a+"')/$value";var r=new sap.m.PDFViewer;this.getView().addDependent(r);r.setSource(n);r.setTitle("Fomulário");r.open()},onActionPrintEnable:function(e,t){debugger}}});                                                                   